<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Scan Repositories - Repo Intel</title>
    <style>
        body { font-family: system-ui, Arial, sans-serif; margin: 2rem; background:#f5f7fa; }
        h1 { margin-top:0; }
        .container { max-width: 800px; margin: 0 auto; }
        .panel { background:#fff; border:1px solid #d0d7de; border-radius:6px; padding:1.5rem; box-shadow:0 1px 2px rgba(0,0,0,.04); margin-bottom:1rem; }
        textarea { width:100%; padding:.6rem; border:1px solid #b5c1cc; border-radius:4px; font-family:monospace; font-size:0.9rem; }
        button { padding:.65rem 1.1rem; background:#2563eb; color:#fff; border:none; border-radius:4px; cursor:pointer; margin-top:0.5rem; }
        button:hover { background:#1d4ed8; }
        .success { background:#d1fae5; border:1px solid #10b981; padding:1rem; border-radius:4px; margin-top:1rem; }
        .error { background:#fee2e2; border:1px solid #ef4444; padding:1rem; border-radius:4px; margin-top:1rem; }
        .nav { margin-bottom:1rem; }
        .nav a { color:#2563eb; text-decoration:none; margin-right:1rem; }
        .nav a:hover { text-decoration:underline; }
        .example { background:#f3f4f6; padding:0.75rem; border-radius:4px; margin:0.5rem 0; font-family:monospace; font-size:0.85rem; }
        pre { background:#0f172a; color:#e2e8f0; padding:.75rem; border-radius:4px; overflow:auto; font-size:0.85rem; }
    </style>
</head>
<body>
<div class="container">
    <div class="nav">
        <a href="/chat">‚Üê Back to Chat</a>
        <a href="/scan">Scan Repos</a>
        <a href="/state">View State</a>
    </div>

    <h1>Scan Repositories</h1>

    <div class="panel">
        <h3>Add Repository URLs to Scan</h3>
        <p>Enter one or more Git repository URLs (one per line):</p>
        <div style="background:#fef3c7; border:1px solid #f59e0b; padding:0.75rem; border-radius:4px; font-size:0.9rem; margin-bottom:0.75rem;">
            <strong>üí° Private Repos:</strong> Use HTTPS format with token:
            <code>https://TOKEN@github.com/user/repo.git</code>
            <a href="/help/private-repos" style="color:#2563eb; margin-left:0.5rem;">Need help?</a>
        </div>
        <div style="background:#fee2e2; border:1px solid #ef4444; padding:0.75rem; border-radius:4px; font-size:0.85rem; margin-bottom:0.75rem;">
            <strong>‚ö†Ô∏è Common Mistake:</strong><br/>
            ‚ùå <code>https://github.com/user/repo.git</code> ‚Üê Missing token (will fail for private repos)<br/>
            ‚úÖ <code>https://YOUR_TOKEN@github.com/user/repo.git</code> ‚Üê Correct format<br/>
            <strong>Every private repo URL needs the token!</strong>
        </div>

        <form method="post" action="/scan">
            <textarea name="repos" rows="10" placeholder="https://github.com/spring-projects/spring-boot&#10;https://github.com/apache/maven&#10;https://github.com/junit-team/junit5"></textarea>
            <button type="submit">Scan Repositories</button>
        </form>

        <h4>Examples:</h4>
        <div class="example">https://github.com/spring-projects/spring-boot</div>
        <div class="example">https://github.com/apache/maven</div>
        <div class="example">https://github.com/junit-team/junit5</div>
    </div>

    <div th:if="${message}" class="success" th:text="${message}"></div>
    <div th:if="${error}" class="error" th:text="${error}"></div>

    <div th:if="${results}" class="panel">
        <h3>Scan Results</h3>
        <pre th:text="${results}"></pre>
    </div>

    <div class="panel">
        <h3>Current State</h3>
        <p>Repositories scanned: <strong th:text="${repoCount}">0</strong></p>
        <div th:if="${repoNames}">
            <p>Repository names:</p>
            <ul>
                <li th:each="name : ${repoNames}" th:text="${name}"></li>
            </ul>
        </div>
    </div>
</div>
</body>
</html>

