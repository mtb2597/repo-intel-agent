<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>How to Scan Private Repos - Repo Intel</title>
    <style>
        body { font-family: system-ui, Arial, sans-serif; margin: 2rem; background:#f5f7fa; }
        h1, h2, h3 { margin-top:0; }
        .container { max-width: 900px; margin: 0 auto; }
        .panel { background:#fff; border:1px solid #d0d7de; border-radius:6px; padding:1.5rem; box-shadow:0 1px 2px rgba(0,0,0,.04); margin-bottom:1rem; }
        .nav { margin-bottom:1rem; }
        .nav a { color:#2563eb; text-decoration:none; margin-right:1rem; }
        .nav a:hover { text-decoration:underline; }
        .alert { background:#fef3c7; border:1px solid #f59e0b; padding:1rem; border-radius:4px; margin-bottom:1rem; }
        .error-example { background:#fee2e2; border:1px solid #ef4444; padding:0.75rem; border-radius:4px; margin:0.5rem 0; font-family:monospace; font-size:0.85rem; }
        .success-example { background:#d1fae5; border:1px solid #10b981; padding:0.75rem; border-radius:4px; margin:0.5rem 0; font-family:monospace; font-size:0.85rem; }
        code { background:#f3f4f6; padding:0.2rem 0.4rem; border-radius:3px; font-size:0.9rem; }
        ol, ul { line-height:1.8; }
        .step { background:#e0f2fe; padding:0.5rem 1rem; border-left:3px solid #0369a1; margin:1rem 0; }
    </style>
</head>
<body>
<div class="container">
    <div class="nav">
        <a href="/chat">Chat</a>
        <a href="/scan">‚Üê Back to Scan</a>
        <a href="/state">View State</a>
    </div>

    <h1>üîê Scanning Private Repositories</h1>

    <div class="alert">
        <strong>‚ö†Ô∏è Common Issue:</strong> SSH URLs won't work because the app doesn't have access to your SSH keys.
    </div>

    <div class="panel">
        <h2>Your Error</h2>
        <div class="error-example">
git@github.com:thermofisher/csd-gx-tahoe.git: remote hung up unexpectedly
        </div>
        <p><strong>Cause:</strong> Trying to use SSH protocol (<code>git@github.com:</code>) without SSH key authentication configured.</p>
    </div>

    <div class="panel">
        <h2>‚úÖ Solution: Use HTTPS with Personal Access Token</h2>

        <div class="step">
            <h3>Step 1: Create a GitHub Personal Access Token</h3>
            <ol>
                <li>Go to GitHub ‚Üí Settings ‚Üí Developer settings ‚Üí Personal access tokens ‚Üí Tokens (classic)</li>
                <li>Click "Generate new token (classic)"</li>
                <li>Give it a name like "Repo Intel Scanner"</li>
                <li>Select scope: <strong>repo</strong> (Full control of private repositories)</li>
                <li>Click "Generate token" and <strong>copy the token</strong> (you won't see it again!)</li>
            </ol>
        </div>

        <div class="step">
            <h3>Step 2: Use HTTPS URL Format with Token</h3>
            <p>Convert your SSH URL to HTTPS format with embedded token:</p>

            <p><strong>‚ùå SSH Format (won't work):</strong></p>
            <div class="error-example">git@github.com:thermofisher/csd-gx-tahoe.git</div>

            <p><strong>‚úÖ HTTPS Format (will work):</strong></p>
            <div class="success-example">https://YOUR_TOKEN@github.com/thermofisher/csd-gx-tahoe.git</div>

            <p><strong>Example with actual token:</strong></p>
            <div class="success-example">https://ghp_abc123xyz789token@github.com/thermofisher/csd-gx-tahoe.git</div>
        </div>

        <div class="step">
            <h3>Step 3: Scan Using the HTTPS URL</h3>
            <ol>
                <li>Go back to the <a href="/scan">Scan page</a></li>
                <li>Paste the HTTPS URL with your token</li>
                <li>Click "Scan Repositories"</li>
            </ol>
        </div>
    </div>

    <div class="panel">
        <h2>üîÑ Converting URLs</h2>
        <table style="width:100%; border-collapse:collapse;">
            <tr style="background:#f3f4f6;">
                <th style="padding:0.5rem; border:1px solid #d0d7de;">SSH Format</th>
                <th style="padding:0.5rem; border:1px solid #d0d7de;">HTTPS Format</th>
            </tr>
            <tr>
                <td style="padding:0.5rem; border:1px solid #d0d7de; font-family:monospace; font-size:0.85rem;">
                    git@github.com:USER/REPO.git
                </td>
                <td style="padding:0.5rem; border:1px solid #d0d7de; font-family:monospace; font-size:0.85rem;">
                    https://TOKEN@github.com/USER/REPO.git
                </td>
            </tr>
            <tr>
                <td style="padding:0.5rem; border:1px solid #d0d7de; font-family:monospace; font-size:0.85rem;">
                    git@github.com:thermofisher/csd-gx-tahoe.git
                </td>
                <td style="padding:0.5rem; border:1px solid #d0d7de; font-family:monospace; font-size:0.85rem;">
                    https://TOKEN@github.com/thermofisher/csd-gx-tahoe.git
                </td>
            </tr>
        </table>
    </div>

    <div class="panel">
        <h2>üîí Security Notes</h2>
        <ul>
            <li><strong>Never commit tokens to Git</strong> - They should be kept secret</li>
            <li><strong>Use fine-grained tokens</strong> when possible (limit access to specific repos)</li>
            <li><strong>Set expiration dates</strong> on tokens for better security</li>
            <li><strong>Rotate tokens regularly</strong> - Revoke old ones and create new ones</li>
            <li><strong>For production:</strong> Use environment variables or secrets management instead of embedding tokens in URLs</li>
        </ul>
    </div>

    <div class="panel">
        <h2>üÜì Public Repositories</h2>
        <p>For public repositories, you can use HTTPS URLs without tokens:</p>
        <div class="success-example">
https://github.com/spring-projects/spring-boot
https://github.com/apache/maven
https://github.com/junit-team/junit5
        </div>
        <p><a href="/scan">Try scanning these public repos first</a> to test the system.</p>
    </div>

    <div class="panel">
        <h2>üìö Additional Resources</h2>
        <ul>
            <li><a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token" target="_blank">GitHub: Creating a Personal Access Token</a></li>
            <li><a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens" target="_blank">GitHub: Managing Personal Access Tokens</a></li>
        </ul>
    </div>
</div>
</body>
</html>

